<syncfusion:ChromelessWindow x:Class="BusBuddy.WPF.Views.Main.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:syncfusion="http://schemas.syncfusion.com/wpf"
        xmlns:route="clr-namespace:BusBuddy.WPF.Views.Route"
        mc:Ignorable="d"
        Title="ðŸšŒ BusBuddy MVP - Student Route Management"
        Height="900"
        Width="1400"
        WindowStartupLocation="CenterScreen"
        WindowState="Maximized">

    <!-- Theme resources merged to enable DynamicResource-based theming -->
    <syncfusion:ChromelessWindow.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/BusBuddy.WPF;component/Resources/SyncfusionV30_Validated_ResourceDictionary.xaml"/>
                <ResourceDictionary Source="/BusBuddy.WPF;component/Resources/Themes/FluentDarkTheme.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </syncfusion:ChromelessWindow.Resources>

    <!-- MVP-Ready UI with DockingManager for professional layout -->
    <!-- Trigger language server refresh -->
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
    <Border Grid.Row="0" Background="{DynamicResource AccentBackgroundBrush}" Padding="20">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <TextBlock Grid.Row="0" Text="ðŸšŒ BusBuddy MVP - Transportation Management"
                           FontSize="28" FontWeight="Bold" Foreground="{DynamicResource ButtonForegroundBrush}"
                           HorizontalAlignment="Center"/>
                <TextBlock Grid.Row="1" Text="Students | Routes | Buses | Drivers - Monday Ready Demo"
                           FontSize="16" Foreground="{DynamicResource ButtonForegroundBrush}" Opacity="0.9"
                           HorizontalAlignment="Center" Margin="0,8,0,0"/>

                <!-- Navigation Buttons -->
                <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,15,0,0">
                    <syncfusion:ButtonAdv Label="ðŸ“š Students" Margin="0,0,10,0" Padding="15,8"
                                          Background="{DynamicResource ButtonBackgroundBrush}" Foreground="{DynamicResource ButtonForegroundBrush}" BorderThickness="0"
                                          Click="StudentsButton_Click" FontSize="14" FontWeight="SemiBold"
                                          ToolTip="Manage student records and information"
                                          AutomationProperties.Name="Students Management"/>
                    <syncfusion:ButtonAdv Label="ðŸšŒ Routes" Margin="0,0,10,0" Padding="15,8"
                                          Background="{DynamicResource ButtonBackgroundBrush}" Foreground="{DynamicResource ButtonForegroundBrush}" BorderThickness="0"
                                          Click="RouteManagementButton_Click" FontSize="14" FontWeight="SemiBold"
                                          ToolTip="Plan and manage transportation routes"
                                          AutomationProperties.Name="Route Management"/>
                    <syncfusion:ButtonAdv Label="ðŸš Buses" Margin="0,0,10,0" Padding="15,8"
                                          Background="{DynamicResource ButtonBackgroundBrush}" Foreground="{DynamicResource ButtonForegroundBrush}" BorderThickness="0"
                                          Click="BusesButton_Click" FontSize="14" FontWeight="SemiBold"
                                          ToolTip="Manage bus fleet and vehicle information"
                                          AutomationProperties.Name="Bus Management"/>
                    <syncfusion:ButtonAdv Label="ðŸ‘¨â€âœˆï¸ Drivers" Margin="0,0,10,0" Padding="15,8"
                                          Background="{DynamicResource ButtonBackgroundBrush}" Foreground="{DynamicResource ButtonForegroundBrush}" BorderThickness="0"
                                          Click="DriversButton_Click" FontSize="14" FontWeight="SemiBold"
                                          ToolTip="Manage driver information and schedules"
                                          AutomationProperties.Name="Driver Management"/>
                    <syncfusion:ButtonAdv Label="ðŸ“Š Reports" Padding="15,8"
                                          Background="{DynamicResource ButtonBackgroundBrush}" Foreground="{DynamicResource ButtonForegroundBrush}" BorderThickness="0"
                                          Click="ReportsButton_Click" FontSize="14" FontWeight="SemiBold"
                                          ToolTip="Generate and view transportation reports"
                                          AutomationProperties.Name="Reports and Print Routes"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Main Content Area with DockingManager -->
        <syncfusion:DockingManager Name="MainDockingManager"
                                   UseDocumentContainer="True"
                                   PersistState="True"
                                   Grid.Row="1">

            <!-- Students Panel -->
            <ContentControl x:Name="StudentsPane"
                            syncfusion:DockingManager.Header="ðŸ“š Students"
                            syncfusion:DockingManager.State="Dock"
                            syncfusion:DockingManager.SideInDockedMode="Left"
                            syncfusion:DockingManager.DesiredWidthInDockedMode="350"
                            Background="{DynamicResource BusBuddy.Brush.Panel.Background}">
                <Grid Margin="15" Background="{DynamicResource BusBuddy.Brush.Panel.Content}">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <syncfusion:SfDataGrid Grid.Row="0" x:Name="StudentsGrid"
                                          ItemsSource="{Binding Students}"
                                          AutoGenerateColumns="False"
                                          AllowEditing="False"
                                          AllowSorting="True"
                                          AllowFiltering="True"
                                          SelectionMode="Single"
                                          GridLinesVisibility="Both"
                                          HeaderLinesVisibility="Both"
                                          Background="{DynamicResource BusBuddy.Brush.DataGrid.Background}"
                                          AutomationProperties.Name="Students Data Grid"
                                          ToolTip="List of all students with their information">
                        <syncfusion:SfDataGrid.Columns>
                            <syncfusion:GridTextColumn HeaderText="Student #" MappingName="StudentNumber" Width="100"/>
                            <syncfusion:GridTextColumn HeaderText="Name" MappingName="StudentName" Width="140"/>
                            <syncfusion:GridTextColumn HeaderText="Grade" MappingName="Grade" Width="60"/>
                            <syncfusion:GridTextColumn HeaderText="Address" MappingName="HomeAddress" Width="180"/>
                        </syncfusion:SfDataGrid.Columns>
                    </syncfusion:SfDataGrid>

                    <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,15,0,0">
                        <syncfusion:ButtonAdv Label="âž• Add Student" Margin="0,0,10,0" Padding="12,6"
                                              Background="{DynamicResource ButtonBackgroundBrush}" Foreground="{DynamicResource ButtonForegroundBrush}" BorderThickness="0"
                                              Click="AddStudent_Click"
                                              ToolTip="Add a new student to the system"
                                              AutomationProperties.Name="Add New Student"/>
                        <syncfusion:ButtonAdv Label="ðŸ“ Edit Student" Padding="12,6"
                                              Background="{DynamicResource ButtonBackgroundBrush}" Foreground="{DynamicResource ButtonForegroundBrush}" BorderThickness="0"
                                              Click="EditStudent_Click"
                                              ToolTip="Edit selected student information"
                                              AutomationProperties.Name="Edit Selected Student"/>
                    </StackPanel>
                </Grid>
            </ContentControl>

            <!-- Routes Panel -->
            <ContentControl x:Name="RoutesPane"
                            syncfusion:DockingManager.Header="ðŸšŒ Routes"
                            syncfusion:DockingManager.State="Dock"
                            syncfusion:DockingManager.SideInDockedMode="Right"
                            syncfusion:DockingManager.DesiredWidthInDockedMode="380"
                            Background="{DynamicResource BusBuddy.Brush.Panel.Background}">
                <Grid Margin="15" Background="{DynamicResource BusBuddy.Brush.Panel.Content}">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <syncfusion:SfDataGrid Grid.Row="0" x:Name="RoutesGrid"
                                          ItemsSource="{Binding Routes}"
                                          AutoGenerateColumns="False"
                                          AllowEditing="False"
                                          AllowSorting="True"
                                          AllowFiltering="True"
                                          SelectionMode="Single"
                                          GridLinesVisibility="Both"
                                          HeaderLinesVisibility="Both"
                                          Background="{DynamicResource BusBuddy.Brush.DataGrid.Background}"
                                          AutomationProperties.Name="Routes Data Grid"
                                          ToolTip="List of all transportation routes">
                        <syncfusion:SfDataGrid.Columns>
                            <syncfusion:GridTextColumn HeaderText="Route Name" MappingName="RouteName" Width="120"/>
                            <syncfusion:GridTextColumn HeaderText="School" MappingName="School" Width="140"/>
                            <syncfusion:GridTextColumn HeaderText="Description" MappingName="Description" Width="180"/>
                            <syncfusion:GridDateTimeColumn HeaderText="Date" MappingName="Date" Width="100" Pattern="ShortDate"/>
                        </syncfusion:SfDataGrid.Columns>
                    </syncfusion:SfDataGrid>

                    <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,15,0,0">
                        <syncfusion:ButtonAdv Label="ðŸ—ºï¸ Optimize Routes" Margin="0,0,10,0" Padding="12,6"
                                              Background="{DynamicResource ButtonBackgroundBrush}" Foreground="{DynamicResource ButtonForegroundBrush}" BorderThickness="0"
                                              Click="OptimizeRoutes_Click"
                                              ToolTip="Optimize route efficiency and timing"
                                              AutomationProperties.Name="Optimize Transportation Routes"/>
                        <syncfusion:ButtonAdv Label="ðŸ“„ Export Schedules" Padding="12,6"
                                              Background="{DynamicResource ButtonBackgroundBrush}" Foreground="{DynamicResource ButtonForegroundBrush}" BorderThickness="0"
                                              Click="ExportSchedules_Click"
                                              ToolTip="Export route schedules to file"
                                              AutomationProperties.Name="Export Route Schedules"/>
                    </StackPanel>
                </Grid>
            </ContentControl>

            <!-- Buses Panel -->
            <ContentControl syncfusion:DockingManager.Header="ðŸš Buses"
                            syncfusion:DockingManager.State="Document"
                            Background="{DynamicResource BusBuddy.Brush.Panel.Background}">
                <Grid Margin="15" Background="{DynamicResource BusBuddy.Brush.Panel.Content}">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <syncfusion:SfDataGrid Grid.Row="0" x:Name="BusesGrid"
                                          ItemsSource="{Binding Buses}"
                                          AutoGenerateColumns="False"
                                          AllowEditing="False"
                                          AllowSorting="True"
                                          AllowFiltering="True"
                                          SelectionMode="Single"
                                          GridLinesVisibility="Both"
                                          HeaderLinesVisibility="Both"
                                          Background="{DynamicResource BusBuddy.Brush.DataGrid.Background}"
                                          AutomationProperties.Name="Buses Data Grid"
                                          ToolTip="List of all buses in the fleet">
                        <syncfusion:SfDataGrid.Columns>
                            <syncfusion:GridTextColumn HeaderText="Bus #" MappingName="BusNumber" Width="120"/>
                            <syncfusion:GridTextColumn HeaderText="License" MappingName="LicenseNumber" Width="120"/>
                            <syncfusion:GridTextColumn HeaderText="Make" MappingName="Make" Width="100"/>
                            <syncfusion:GridTextColumn HeaderText="Model" MappingName="Model" Width="120"/>
                            <syncfusion:GridNumericColumn HeaderText="Year" MappingName="Year" Width="80"/>
                            <syncfusion:GridNumericColumn HeaderText="Capacity" MappingName="SeatingCapacity" Width="80"/>
                        </syncfusion:SfDataGrid.Columns>
                    </syncfusion:SfDataGrid>

                    <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,15,0,0">
                        <syncfusion:ButtonAdv Label="âž• Add Bus" Margin="0,0,10,0" Padding="12,6"
                                              Background="{DynamicResource ButtonBackgroundBrush}" Foreground="{DynamicResource ButtonForegroundBrush}" BorderThickness="0"
                                              Click="AddBus_Click"
                                              ToolTip="Add a new bus to the fleet"
                                              AutomationProperties.Name="Add New Bus"/>
                        <syncfusion:ButtonAdv Label="ðŸ”§ Maintenance" Margin="0,0,10,0" Padding="12,6"
                                              Background="{DynamicResource ButtonBackgroundBrush}" Foreground="{DynamicResource ButtonForegroundBrush}" BorderThickness="0"
                                              Click="Maintenance_Click"
                                              ToolTip="Schedule and track bus maintenance"
                                              AutomationProperties.Name="Bus Maintenance"/>
                        <syncfusion:ButtonAdv Label="ðŸ“Š Fleet Status" Padding="12,6"
                                              Background="{DynamicResource ButtonBackgroundBrush}" Foreground="{DynamicResource ButtonForegroundBrush}" BorderThickness="0"
                                              Click="FleetStatus_Click"
                                              ToolTip="View current fleet status and availability"
                                              AutomationProperties.Name="Fleet Status Overview"/>
                    </StackPanel>
                </Grid>
            </ContentControl>

            <!-- Drivers Panel -->
            <ContentControl syncfusion:DockingManager.Header="ðŸ‘¨â€âœˆï¸ Drivers"
                            syncfusion:DockingManager.State="Document"
                            Background="{DynamicResource BusBuddy.Brush.Panel.Background}">
                <Grid Margin="15" Background="{DynamicResource BusBuddy.Brush.Panel.Content}">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <syncfusion:SfDataGrid Grid.Row="0" x:Name="DriversGrid"
                                          ItemsSource="{Binding Drivers}"
                                          AutoGenerateColumns="False"
                                          AllowEditing="False"
                                          AllowSorting="True"
                                          AllowFiltering="True"
                                          SelectionMode="Single"
                                          GridLinesVisibility="Both"
                                          HeaderLinesVisibility="Both"
                                          Background="{DynamicResource BusBuddy.Brush.DataGrid.Background}"
                                          AutomationProperties.Name="Drivers Data Grid"
                                          ToolTip="List of all drivers and their information">
                        <syncfusion:SfDataGrid.Columns>
                            <syncfusion:GridTextColumn HeaderText="Name" MappingName="DriverName" Width="150"/>
                            <syncfusion:GridTextColumn HeaderText="License Type" MappingName="DriversLicenceType" Width="120"/>
                            <syncfusion:GridMaskColumn HeaderText="Phone" MappingName="DriverPhone" Width="120" Mask="(###) ###-####"/>
                            <syncfusion:GridTextColumn HeaderText="Email" MappingName="DriverEmail" Width="200"/>
                        </syncfusion:SfDataGrid.Columns>
                    </syncfusion:SfDataGrid>

                    <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,15,0,0">
                        <syncfusion:ButtonAdv Label="âž• Add Driver" Margin="0,0,10,0" Padding="12,6"
                                              Background="{DynamicResource ButtonBackgroundBrush}" Foreground="{DynamicResource ButtonForegroundBrush}" BorderThickness="0"
                                              Click="AddDriver_Click"
                                              ToolTip="Add a new driver to the system"
                                              AutomationProperties.Name="Add New Driver"/>
                        <syncfusion:ButtonAdv Label="ðŸšŒ Assign Bus" Margin="0,0,10,0" Padding="12,6"
                                              Background="{DynamicResource ButtonBackgroundBrush}" Foreground="{DynamicResource ButtonForegroundBrush}" BorderThickness="0"
                                              Click="AssignBus_Click"
                                              ToolTip="Assign a bus to the selected driver"
                                              AutomationProperties.Name="Assign Bus to Driver"/>
                        <syncfusion:ButtonAdv Label="ðŸ“… Schedule" Padding="12,6"
                                              Background="{DynamicResource ButtonBackgroundBrush}" Foreground="{DynamicResource ButtonForegroundBrush}" BorderThickness="0"
                                              Click="Schedule_Click"
                                              ToolTip="Manage driver schedules and assignments"
                                              AutomationProperties.Name="Driver Schedule Management"/>
                    </StackPanel>
                </Grid>
            </ContentControl>

            <!-- Route Assignment Panel -->
            <ContentControl syncfusion:DockingManager.Header="ðŸ—ºï¸ Route Assignments"
                            syncfusion:DockingManager.State="Document"
                            Background="{DynamicResource BusBuddy.Brush.Panel.Background}">
                <Grid Background="{DynamicResource BusBuddy.Brush.Panel.Content}">
                    <route:RouteAssignmentView/>
                </Grid>
            </ContentControl>

        </syncfusion:DockingManager>

        <!-- Status Bar -->
    <Border Grid.Row="2" Background="{DynamicResource PrimaryBackgroundBrush}" Padding="15,12">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0"
                           Text="ðŸŽ¯ MVP Ready: Students âœ… | Routes âœ… | Buses âœ… | Drivers âœ… | Reports âœ… | PowerShell Demo: bb-route-demo"
                           Foreground="{DynamicResource PrimaryTextBrush}" VerticalAlignment="Center" FontSize="14"/>
                <TextBlock Grid.Column="1" Text="âœ… Monday Demo Ready"
                           Foreground="#10B981" VerticalAlignment="Center" FontSize="14" FontWeight="SemiBold"/>
            </Grid>
        </Border>
    </Grid>
</syncfusion:ChromelessWindow>
