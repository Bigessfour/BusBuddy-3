<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <!-- ðŸšŒ BusBuddy NuGet Configuration -->
    <!-- Ensures consistent package restoration across development environments -->
    <!-- Resolves NU3034, NU1100, NU1102 package validation and resolution errors -->
    
    <packageSources>
        <clear />
        <!-- Primary NuGet.org source - All packages including Syncfusion are available here -->
        <!-- Reference: https://help.syncfusion.com/windowsforms/installation/install-nuget-packages -->
        <add key="nuget.org"
             value="https://api.nuget.org/v3/index.json"
             protocolVersion="3" />
    </packageSources>

    <packageRestore>
        <!-- Automatic package restore settings -->
        <add key="enabled"
             value="True" />
        <add key="automatic"
             value="True" />
    </packageRestore>

    <bindingRedirects>
        <!-- Automatic binding redirect generation -->
        <add key="skip"
             value="False" />
    </bindingRedirects>

    <packageManagement>
        <!-- Default package management format -->
        <add key="format"
             value="1" />
        <add key="disabled"
             value="False" />
    </packageManagement>

    <config>
        <!-- Use default global packages folder (no local packages directory) -->
        <add key="globalPackagesFolder"
             value="" />
        <!-- Dependency behavior settings -->
        <add key="dependencyVersion"
             value="Highest" />
        <!-- CRITICAL: Disable signature validation for development to resolve NU3034 -->
        <add key="signatureValidationMode"
             value="accept" />
        <!-- Package source mapping for better security -->
        <add key="repositoryPath"
             value="packages" />
        <!-- Default format for PackageReference (no packages.config) -->
        <add key="defaultPushSource"
             value="https://api.nuget.org/v3/index.json" />
        <!-- HTTP timeout settings for reliable package downloads -->
        <add key="http_timeout"
             value="600" />
        <add key="maxHttpRequestsPerSource"
             value="16" />
        <!-- Additional settings to resolve package issues -->
        <add key="skipDuplicatePackageErrors"
             value="True" />
        <add key="noCache"
             value="False" />
    </config>

    <!-- Package source mapping for enhanced security and resolution -->
    <!-- Maps ALL packages to nuget.org to resolve NU1100/NU1102 errors -->
    <packageSourceMapping>
        <packageSource key="nuget.org">
            <!-- Allow ALL packages from nuget.org (critical for resolution) -->
            <package pattern="*" />
            <!-- Explicit patterns for key packages -->
            <package pattern="Microsoft.*" />
            <package pattern="System.*" />
            <package pattern="NETStandard.*" />
            <package pattern="Syncfusion.*" />
            <package pattern="Serilog.*" />
            <package pattern="AutoMapper.*" />
            <package pattern="CommunityToolkit.*" />
            <package pattern="NUnit*" />
            <package pattern="Moq*" />
            <package pattern="FluentAssertions*" />
            <package pattern="Coverlet.*" />
            <package pattern="Google.*" />
            <package pattern="OpenAI*" />
            <package pattern="Polly*" />
            <package pattern="Azure.*" />
            <package pattern="Castle.*" />
            <package pattern="NetTopologySuite*" />
            <package pattern="SQLitePCLRaw*" />
            <package pattern="Humanizer*" />
            <package pattern="Mono.*" />
            <package pattern="Newtonsoft.*" />
            <!-- Added to allow global tool installation for dotnet-ef (EF Core CLI) -->
            <package pattern="dotnet-ef" />
        </packageSource>
    </packageSourceMapping>

    <!-- Trusted signers configuration - DISABLED for development to resolve NU3034 -->
    <!-- Uncomment and configure properly for production environments -->
    <!--
    <trustedSigners>
        <author name="Microsoft">
            <certificate fingerprint="3F9001EA83C560D712C24CF213C3D312CB3BFF51EE89435D3430BD06B5D0EECE"
                         hashAlgorithm="SHA256"
                         allowUntrustedRoot="false" />
        </author>
        <repository name="nuget.org" serviceIndex="https://api.nuget.org/v3/index.json">
            <certificate fingerprint="0E5F38F57DC1BCC806D8494F4F90FBCEDD988B46760709CBEEC6F4219AA6157D"
                         hashAlgorithm="SHA256"
                         allowUntrustedRoot="false" />
        </repository>
    </trustedSigners>
    -->

</configuration>